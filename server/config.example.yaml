# Example configuration file for OpenShortPath Server
# Copy this file to config.yaml and modify as needed

# Server port (default: 3000)
port: 3000
# PostgreSQL connection URI (optional)
# If provided, the server will use Postgres instead of SQLite
# postgres_uri: postgres://user:password@localhost:5432/dbname?sslmode=disable

# SQLite database path (default: db.sqlite)
# Only used if postgres_uri is not provided
# sqlite_path: db.sqlite

# Available short domains (default: ["localhost:3000"])
# List of domains used to shorten URLs
# available_short_domains:
#   - localhost:3000

# Authentication provider (required)
# Options: "local" or "external_jwt"
# - "local": Server handles authentication via username/password and issues JWT tokens
#   When set to "local", the login endpoint at /api/v1/login is enabled
# - "external_jwt": JWT tokens are provided externally, server only validates them
auth_provider: local

# JWT Authentication (required)
# JWT tokens are passed as Bearer tokens in the Authorization header
# When a valid JWT token is provided, the 'sub' claim is extracted as User ID
jwt:
  # Algorithm: "HS256" for symmetric (HMAC) or "RS256" for asymmetric (RSA)
  algorithm: HS256
  # Secret key for HS256 (required if using HS256)
  secret_key: your-secret-key-here
  # Public key for RS256 in PEM format (required if using RS256)
  # public_key: |
  #   -----BEGIN PUBLIC KEY-----
  #   MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA...
  #   -----END PUBLIC KEY-----

# Example: External JWT with RS256 configuration
# auth_provider: external_jwt
# jwt:
#   algorithm: RS256
#   public_key: |
#     -----BEGIN PUBLIC KEY-----
#     MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA...
#     -----END PUBLIC KEY-----

# Example: Local authentication with RS256
# auth_provider: local
# jwt:
#   algorithm: RS256
#   # Private key is required for signing tokens when using local auth with RS256
#   private_key: |
#     -----BEGIN PRIVATE KEY-----
#     MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC...
#     -----END PRIVATE KEY-----
#   # Public key is required for verifying tokens
#   public_key: |
#     -----BEGIN PUBLIC KEY-----
#     MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA...
#     -----END PUBLIC KEY-----

# Admin password for administrative API endpoints
# This is a super long password used for authentication on admin endpoints
# Pass this as a Bearer token in the Authorization header: Authorization: Bearer <admin_password>
# admin_password: change-this-to-a-super-long-random-password-at-least-128-characters-long-for-security-purposes-use-a-password-manager-to-generate-a-strong-random-password

# Dashboard development server URL (optional)
# If provided, the /dashboard route will proxy requests to this URL instead of serving embedded files
# This is useful for development. Leave empty or unset to use embedded dashboard files.
# dashboard_dev_server_url: http://localhost:5173
